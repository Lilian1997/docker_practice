# 選擇 Node.js 的基礎映像檔版本
FROM node:18

# 設置工作目錄，WORKDIR 是 Dockerfile 的指令，用來設置在容器內部用於存儲應用程式檔案的目錄。/usr/src/app是常見的目錄
WORKDIR /app

# 複製應用程式程式碼到工作目錄
# 從當前環境的目錄複製到docker環境的目錄 從點到點的意思
COPY . .

# 安裝套件
# 正式運行之前的環境建立    
# RUN 指令用於在映像檔構建階段執行命令，並創建新的層。每個 RUN 指令都會在當前映像檔的頂部創建一個新的層並提交更改，進而形成新的映像檔。可以多個。
RUN npm install


# 暴露應用程式所使用的端口
# 簡而言之，EXPOSE 是為了提供一種標準化的標記方式，方便使用者理解容器中應用程式所使用的端口，但實際的端口映射還需要在運行容器時使用 -p 選項指定。
EXPOSE 3000 

# 啟動您的應用程式
# CMD 指令用於指定一個容器啟動時需要執行的命令。每個 Dockerfile 只能包含一個 CMD 指令。
# 總結來說，RUN 是在構建映像檔時執行的命令，而 CMD 是在容器啟動時執行的命令。
CMD ["npm", "start"] 
